# ADR-002: バックエンド方針（初期フェーズで専用 API サーバを持たない）

## Context
開発初期は機能範囲が限定され、運用コストを最小化したい。また、Supabase が認証・DB・ストレージを提供するため、専用 API サーバを持たなくても主要な業務要件を満たせる見込みがある。

## Decision
- 初期フェーズでは専用の API サーバを構築せず、Supabase のビュー、RPC、Storage を業務ロジックの抽象レイヤとして活用する。
- フロントエンド（Cloudflare Pages）とバッチ（GitHub Actions）は Supabase クライアント経由で DB/Storage へ直接アクセスする。
- 必要に応じて Supabase 側でロール/ポリシーを調整し、最小限の権限で安全にアクセスできるようにする。
- 将来的に要件が増した場合は Cloudflare Functions などで薄い API を追加し、認可や外部連携を段階的に拡張する。

## Consequences
- 実装初期は構成が単純化し、デプロイ/運用コストを抑えられる。
- Supabase の機能に依存するため、複雑なドメインロジックが増える際には RPC やビューの設計見直しが必要となる。
- 直接アクセスのためクライアント側でのエラーハンドリングやスキーマ変更への追従を意識する必要がある。
- 将来 API が追加された際には、既存の Supabase アクセスと共存する移行計画を検討する必要がある。
