# ADR-003: Supabase と GPT の統合に MCP を採用する

## Context
GPT から Supabase へ直接 SQL を発行することはセキュリティやガバナンスの観点で望ましくない。対話から業務データを安全に扱うためには、権限制御された媒介レイヤが必要である。

## Decision
- Supabase MCP サーバを別プロセスとして用意し、GPT から MCP ツール経由で Supabase にアクセスする方式を採用する。
- MCP ツールとして `list_tasks` や `get_monthly_report` など、業務ドメインに沿った操作を提供する。
- GPT (MCP 対応クライアント) は会話中でこれらのツールを呼び出し、人間が直接 SQL を書かずに問い合わせ・更新を完結できるようにする。

## Consequences
- MCP サーバで権限や入力制御を実装することで、誤操作や過剰権限のリスクを低減できる。
- ツール設計次第で GPT からの利用体験が大きく左右されるため、業務フローに沿った粒度の API 設計が求められる。
- MCP サーバのデプロイ/運用が追加されるが、小規模サーバまたはローカル環境での稼働を想定するためコストは限定的である。
